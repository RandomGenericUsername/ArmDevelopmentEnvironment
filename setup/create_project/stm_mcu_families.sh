#!/bin/bash

export FPU_V4="fpv4-sp-d16"
export FPU_V5="fpv5-sp-d16"

# Define an array of supported microcontroller families
export SUPPORTED_FAMILIES=("stm32f411xe" "stm32h755xx" "stm32wl55xx")

# Declare an associative array for dual-core families
declare -A MPU_PER_MCU_FAMILY 
MPU_PER_MCU_FAMILY["stm32h755xx"]="m4 m7"
MPU_PER_MCU_FAMILY["stm32wl55xx"]="m0plus m4"
MPU_PER_MCU_FAMILY["stm32f411xe"]="m4"


declare -A FPU_V_PER_PROCESSOR
FPU_V_PER_PROCESSOR["m0plus"]="none"
FPU_V_PER_PROCESSOR["m4"]=$FPU_V4
FPU_V_PER_PROCESSOR["m7"]=$FPU_V5

declare -A FPU_PER_PROCESSOR
FPU_PER_PROCESSOR["m0plus"]="none"
FPU_PER_PROCESSOR["m4"]="hard"
FPU_PER_PROCESSOR["m7"]="hard"




declare -A STM32F411XE_INTERFACE_CONFIG
STM32F411XE_INTERFACE_CONFIG["m4"]="stlink"

declare -A STM32H755XX_INTERFACE_CONFIG
STM32H755XX_INTERFACE_CONFIG["m4"]="stlink-dap"
STM32H755XX_INTERFACE_CONFIG["m7"]="stlink-dap"

declare -A STM32WL55XX_INTERFACE_CONFIG
STM32WL55XX_INTERFACE_CONFIG["m4"]="stlink"
STM32WL55XX_INTERFACE_CONFIG["m0plus"]="stlink"

declare -A INTERFACE_CONFIG
INTERFACE_CONFIG["stm32h755xx"]="STM32H755XX_INTERFACE_CONFIG"
INTERFACE_CONFIG["stm32f411xe"]="STM32F411XE_INTERFACE_CONFIG"
INTERFACE_CONFIG["stm32wl55xx"]="STM32WL55XX_INTERFACE_CONFIG"

declare -A STM32H755XX_TARGET_SEL
STM32H755XX_TARGET_SEL["m4"]="board"
STM32H755XX_TARGET_SEL["m7"]="board"

declare -A STM32F411XE_TARGET_SEL
STM32F411XE_TARGET_SEL["m4"]="board"

declare -A STM32WL55XX_TARGET_SEL
STM32WL55XX_TARGET_SEL["m0plus"]="target"
STM32WL55XX_TARGET_SEL["m4"]="target"

declare -A TARGET_SEL
TARGET_SEL["stm32h755xx"]="STM32H755XX_TARGET_SEL"
TARGET_SEL["stm32f411xe"]="STM32F411XE_TARGET_SEL"
TARGET_SEL["stm32wl55xx"]="STM32WL55XX_TARGET_SEL"

declare -A STM32H755XX_TARGET_CONFIG
STM32H755XX_TARGET_CONFIG["m4"]="st_nucleo_h745zi"
STM32H755XX_TARGET_CONFIG["m7"]="st_nucleo_h745zi"

declare -A STM32F411XE_TARGET_CONFIG
STM32F411XE_TARGET_CONFIG["m4"]="st_nucleo_f4"

declare -A STM32WL55XX_TARGET_CONFIG
STM32WL55XX_TARGET_CONFIG["m4"]="stm32wlx"
STM32WL55XX_TARGET_CONFIG["m0plus"]="stm32wlx"

declare -A TARGET_CONFIG
TARGET_CONFIG["stm32h755xx"]="STM32H755XX_TARGET_CONFIG"
TARGET_CONFIG["stm32f411xe"]="STM32F411XE_TARGET_CONFIG"
TARGET_CONFIG["stm32wl55xx"]="STM32WL55XX_TARGET_CONFIG"



#inner_array_name=${asdf[$1]}
#declare -n inner_array=$inner_array_name
#echo ${inner_array[$2]}

#declare -A LINKER_SCRIPT_PER_MPU
#LINKER_SCRIPT_PER_MPU[""]